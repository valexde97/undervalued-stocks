import{g as F,h as S,r as v,R,d as V,j as s,L as D}from"./index-1Y6r_F-G.js";import{a as E,s as N,r as B,m as w}from"./proxy-DXBtU357.js";function A(e){e.values.forEach(a=>a.stop())}function j(e,a){[...a].reverse().forEach(l=>{const i=e.getVariant(l);i&&N(e,i),e.variantChildren&&e.variantChildren.forEach(o=>{j(o,a)})})}function I(e,a){if(Array.isArray(a))return j(e,a);if(typeof a=="string")return j(e,[a]);N(e,a)}function L(){const e=new Set,a={subscribe(r){return e.add(r),()=>void e.delete(r)},start(r,l){const i=[];return e.forEach(o=>{i.push(E(o,r,{transitionOverride:l}))}),Promise.all(i)},set(r){return e.forEach(l=>{I(l,r)})},stop(){e.forEach(r=>{A(r)})},mount(){return()=>{a.stop()}}};return a}function T(){const e=F(L);return S(e.mount,[]),e}const M=T,W={some:0,all:1};function O(e,a,{root:r,margin:l,amount:i="some"}={}){const o=B(e),u=new WeakMap,x=d=>{d.forEach(c=>{const h=u.get(c.target);if(c.isIntersecting!==!!h)if(c.isIntersecting){const _=a(c.target,c);typeof _=="function"?u.set(c.target,_):t.unobserve(c.target)}else typeof h=="function"&&(h(c),u.delete(c.target))})},t=new IntersectionObserver(x,{root:r,rootMargin:l,threshold:typeof i=="number"?i:W[i]});return o.forEach(d=>t.observe(d)),()=>t.disconnect()}function z(e,{root:a,margin:r,amount:l,once:i=!1,initial:o=!1}={}){const[u,x]=v.useState(o);return v.useEffect(()=>{if(!e.current||i&&u)return;const t=()=>(x(!0),i?void 0:()=>x(!1)),d={root:a&&a.current||void 0,margin:r,amount:l};return O(e.current,t,d)},[a,e,r,i,l]),u}const H="_card_usxg6_1",q="_header_usxg6_25",U="_title_usxg6_27",G="_fav_usxg6_33",J="_activeFav_usxg6_51",K="_inlineRow_usxg6_55",Q="_kv_usxg6_57",X="_k_usxg6_57",Y="_v_usxg6_61",Z="_dot_usxg6_63",k="_badge_usxg6_67",ee="_badgeDot_usxg6_89",se="_priceRow_usxg6_107",ne="_priceBlock_usxg6_115",ae="_priceLabel_usxg6_117",te="_priceValue_usxg6_119",re="_delta_usxg6_123",le="_up_usxg6_125",ie="_down_usxg6_127",ce="_subStats_usxg6_131",oe="_range_usxg6_139",ue="_xtra_usxg6_139",de="_metrics_usxg6_143",pe="_ctaWrap_usxg6_153",xe="_viewButton_usxg6_155",n={card:H,header:q,title:U,fav:G,activeFav:J,inlineRow:K,kv:Q,k:X,v:Y,dot:Z,badge:k,badgeDot:ee,priceRow:se,priceBlock:ne,priceLabel:ae,priceValue:te,delta:re,up:le,down:ie,subStats:ce,range:oe,xtra:ue,metrics:de,ctaWrap:pe,viewButton:xe};function he(e,a){return a||(e==null?"—":e>=1e3?`${(e/1e3).toFixed(2)}B`:`${e.toFixed(2)}M`)}function ve(e){if(!e)return"—";const a=String(e).toLowerCase();return a.charAt(0).toUpperCase()+a.slice(1)}const _e=({stock:e})=>{const{favorites:a,toggleFavorite:r}=V(),l=a.includes(e.ticker),i=v.useRef(null),o=z(i,{once:!0,margin:"0px 0px -10% 0px"}),u=M();v.useEffect(()=>{o&&u.start("visible")},[o,u]);const x=`${(e==null?void 0:e.company)??e.name} (${e.ticker})`,t=v.useMemo(()=>{const g=(e==null?void 0:e.open)??null,p=(e==null?void 0:e.prevClose)??null,C=(e==null?void 0:e.high)??null,y=(e==null?void 0:e.low)??null,m=e.price??null,f=m!=null&&p!=null?m-p:null,$=(f!=null&&p?f/p*100:null)??e.changePct??null,P=g!=null&&p!=null?g-p:null;return{open:g,prev:p,high:C,low:y,price:m,dAbs:f,dPct:$,openDelta:P}},[e]),d=ve(e.category),c=t.dPct!=null?t.dPct>=0?n.up:n.down:"",h=t.openDelta!=null?t.openDelta>=0?n.up:n.down:"",_=(e==null?void 0:e.open)!=null&&(e==null?void 0:e.prevClose)!=null?`${e.open.toFixed(2)} • ${e.prevClose.toFixed(2)}${t.openDelta!=null?` (${t.openDelta>=0?"+":""}${t.openDelta.toFixed(2)})`:""}`:"—",b=t.low!=null&&t.high!=null?`${t.low.toFixed(2)} – ${t.high.toFixed(2)}`:"—";return s.jsxs(w.div,{ref:i,initial:"hidden",animate:u,whileHover:{scale:1.02},variants:{hidden:{opacity:0,y:30,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{duration:.4,ease:"easeOut"}}},className:n.card,children:[s.jsxs("div",{className:n.header,children:[s.jsx("h3",{className:n.title,children:x}),s.jsx("button",{onClick:()=>r(e.ticker),className:`${n.fav} ${l?n.activeFav:""}`,"aria-label":l?"remove from favorites":"add to favorites",title:"Toggle favorite",children:l?"⭐":"☆"})]}),s.jsxs("div",{className:n.inlineRow,children:[s.jsxs("span",{className:n.kv,children:[s.jsx("span",{className:n.k,children:"Market Cap:"})," ",s.jsx("span",{className:n.v,children:he(e.marketCap??null,e==null?void 0:e.marketCapText)})]}),s.jsx("span",{className:n.dot,children:"•"}),s.jsxs("span",{className:n.kv,children:[s.jsx("span",{className:n.k,children:"Category:"})," ",s.jsxs("span",{className:n.badge,children:[s.jsx("span",{className:n.badgeDot}),d]})]})]}),s.jsxs("div",{className:n.inlineRow,children:[s.jsxs("span",{className:n.kv,children:[s.jsx("span",{className:n.k,children:"Sector:"})," ",s.jsx("span",{className:n.v,children:e.sector??"—"})]}),s.jsx("span",{className:n.dot,children:"•"}),s.jsxs("span",{className:n.kv,children:[s.jsx("span",{className:n.k,children:"Industry:"})," ",s.jsx("span",{className:n.v,children:e.industry??"—"})]}),e.country?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:n.dot,children:"•"}),s.jsxs("span",{className:n.kv,children:[s.jsx("span",{className:n.k,children:"Country:"})," ",s.jsx("span",{className:n.v,children:e.country})]})]}):null]}),s.jsxs("div",{className:n.priceRow,children:[s.jsxs("div",{className:n.priceBlock,children:[s.jsx("span",{className:n.priceLabel,children:"Price:"}),s.jsx("span",{className:n.priceValue,children:t.price!=null?`$${t.price.toFixed(2)}`:"—"})]}),s.jsxs("span",{className:`${n.delta} ${c}`,children:[t.dPct==null?"":`${t.dPct>=0?"+":""}${t.dPct.toFixed(2)}%`,t.dAbs!=null?` (${t.dAbs>=0?"+":""}${t.dAbs.toFixed(2)})`:""]})]}),s.jsxs("div",{className:n.subStats,children:[s.jsxs("div",{className:n.range,children:["Day range: ",s.jsx("span",{children:b})]}),s.jsxs("div",{className:n.xtra,children:["Open/Prev: ",s.jsx("span",{className:h,children:_})]})]}),s.jsxs("div",{className:n.metrics,children:[s.jsxs("div",{children:["P/E: ",e.pe??e.peSnapshot??"—",e.pe?"":e.peSnapshot?" (finviz)":""]}),s.jsxs("div",{children:["P/S: ",e.ps??e.psSnapshot??"—",e.ps?"":e.psSnapshot?" (finviz)":""]}),s.jsxs("div",{children:["P/B: ",e.pb??e.pbSnapshot??"—",e.pb?"":e.pbSnapshot?" (finviz)":""]})]}),s.jsx("div",{className:n.ctaWrap,children:s.jsx(D,{to:`/stocks/${e.ticker}`,children:s.jsx(w.button,{className:n.viewButton,whileHover:{scale:1.03},whileTap:{scale:.97},children:"View Details"})})})]})};function ge(e,a){const r=e.stock,l=a.stock;return e.stock.ticker===a.stock.ticker&&e.stock.price===a.stock.price&&e.stock.changePct===a.stock.changePct&&r.open===l.open&&r.high===l.high&&r.low===l.low&&r.prevClose===l.prevClose&&e.stock.pe===a.stock.pe&&e.stock.ps===a.stock.ps&&(r.marketCapText??null)===(l.marketCapText??null)&&(e.stock.sector??null)===(a.stock.sector??null)&&(e.stock.industry??null)===(a.stock.industry??null)&&(e.stock.country??null)===(a.stock.country??null)}const we=R.memo(_e,ge);export{we as S};
